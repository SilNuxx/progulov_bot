# Tasks

## Front

- [ ] - *Создать кнопочное меню*

- [x] - Добавить обработку всех команд
- [x] - Добавить обработку однострочных команд
- [x] - Добавить возможность отмены действия
- [x] - Оформить вывод сообщений бота
- [x] - Добавить команду генерации отчёта
- [ ] - Добавить команду полной очистки БД
  - [ ] - Добавить дополнительно подтверждение для удаления критических данных (студены, вся БД)
- [x] - Изменения в БД. truancy_number переименовать в truancy_count, а так же функции, которые используют это имя
- [x] - Добавить команду изменения прогула
- [x] - Изменить команду добавления прогула в соответствие с новым форматом БД (тип прогула теперь число)

## Middle

- [x] - Функция добавления прогула с корректной датой
- [ ] - Обработка ошибок
- [ ] - Валидация данных
- [x] - Изменения в БД. truancy_number переименовать в truancy_count, а так же функции, которые используют это имя
- [x] - Привести вывод прогулов из БД к единому формату как для отчёта, так и для сообщения бота (list_truancy = [id, student_name, count, reason, date])
- [x] - Связать функции обновления прогулов из бота и из БД

- [ ] - *Добавить функцию составления отчёта за месяц (месяц можно выбрать)*
        *(ИМЯ, Пропуски занятий(всего, уважительно, не уважительно),*
        *Пропуски часов(всего, уважительно, не уважительно)) (пропуск часов это кол_пар x2)*

- [ ] - Добавить обработку данных из БД для отчёта
  - [ ] - Прогул "Дней" это счёт truancy_count < 0
  - [ ] - Прогул "Уроков" это счёт truancy_count >= 0
  - [ ] - "всего" - счёт прогулов всех типов
  - [ ] - "по болезни" - счёт прогулов типа "1"
  - [ ] - "уваж. причина" - счёт прогулов типа "0"
  - [ ] - "без уваж." - счёт прогулов типа "2"

## Backend

- [x] - Функции добавления студентов

- [x] - Функция вывода списка студентов

- [x] - Основные функции обращения к таблицам БД
  - [x] - Добавить студента
  - [x] - Удалить студента
  - [x] - Вывести информацию о студенте
  - [x] - Вывести список всех студентов
  - [x] - Добавить прогул
  - [x] - Удалить прогул
  - [x] - Вывести список всех прогулов
  
- [x] - Функция выборки данных во временном диапазоне
  - [x] - Выборка данных в рамках указанного месяца (Ввод в формате даты unixepoch)
- [x] - Сделать имя студента уникальным значением, чтобы было невозможно создать двух студентов с посимвольно одинаковыми именем (допускается создание с отличием в 1 символ)
- [x] - Изменить SQL запрос на вывод списка пропусков так, чтобы дата выводилась в формате ДД-ММ-ГГГГ (сейчас это ГГГ-ММ-ДД)
- [x] - Вынести параметр database_file в config
- [x] - Пофиксить вывод прогулов (выводятся на день раньше чем указано)

- [x] - Переписать таблицу. truancy_type теперь INTEGER. коды причин пропуска: уваж - 0, по болезни - 1, неуваж - 2
  - [x] - Ограничить диапазон значений столбца от 0 до 2 на уровне БД (если возможно)
- [x] - Переписать таблицу. truancy_number переименовать в truancy_count, а так же функции, которые используют это имя

- [x] - Добавить функцию изменения прогула
  - [x] - Изменение только количества или только типа или количества и типа (желательно одной функцией)

- [ ] - Удалить функцию вывода информации о конкретном студенте тк. она бесполезна
- [ ] - Привести вывод прогулов из БД к единому формату как для отчёта, так и для сообщения бота (list_truancy = [id, student_name, count, reason, date])
- [ ] - Отсутствует проверка правильности ТИПА_ПРОГУЛА при обновлении записи (при обновлении записи тип можно указать хоть -1024)
